# ARC — Artist Reference Collection

![Version](https://img.shields.io/badge/version-1.2.9-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![Platform](https://img.shields.io/badge/platform-Windows%20%7C%20macOS%20%7C%20Linux-lightgrey.svg)

**Персональное офлайн настольное приложение для организации визуальных референсов**

[Скачать последнюю версию](https://github.com/rocontd/Artist-Reference-Collection/releases) • [Что нового?](#история-изменений)

---

## О проекте

**ARC** — это desktop-приложение для Windows 10/11 на базе Electron. Приложение создано для каталогизации и организации визуальных референсов — изображений и видео, которые используют дизайнеры, художники и другие творческие специалисты в своей работе.

### Основные возможности

- **Полностью офлайн** — работает без интернета, все данные хранятся локально
- **Импорт из браузера** — сохраняйте изображения прямо со страниц через расширение
- **Высокая производительность** — поддержка коллекций до 50,000 файлов
- **Современный интерфейс** — адаптирован под разрешения 1920×1080 — 2560×1440
- **Умная организация** — система тегов, категорий и коллекций
- **Быстрый поиск** — полнотекстовый поиск с автодополнением
- **Мудборды** — создание визуальных коллажей из референсов
- **Автообновления** — встроенная система обновлений с уведомлениями "Что нового?"
- **Управление хранилищем** — резервное копирование, перенос папок, история действий
- **Статистика и аналитика** — детальная информация о коллекциях, тегах и использовании
- **Безопасность** — защита от path traversal, валидация путей к файлам
- **Кроссплатформенность** — работает на Windows, macOS и Linux

---

## Установка

### Для пользователей

1. Скачайте последнюю версию установщика из [Releases](https://github.com/rocontd/Artist-Reference-Collection/releases)
2. Запустите **ARC-Setup-1.2.9.exe**
3. Следуйте инструкциям установщика
4. Запустите ARC через ярлык на рабочем столе или в меню Пуск

### Браузерное расширение

Для импорта изображений прямо из браузера установите расширение:

1. Откройте браузер (Chrome, Яндекс.Браузер, Edge)
2. Перейдите в `chrome://extensions/` (или `browser://extensions/` для Яндекс.Браузера)
3. Включите "Режим разработчика"
4. Нажмите "Загрузить распакованное расширение"
5. Выберите папку `browser-extension` из репозитория ARC

После установки расширения:
- Наведите курсор на любое изображение на сайте
- Нажмите кнопку "Сохранить в ARC"
- Откройте ARC — появится уведомление с предложением добавить файлы

**Системные требования:**
- Windows 10/11 (64-bit), macOS 10.14+, или Linux (Ubuntu 18.04+)
- 4 GB оперативной памяти
- 100 MB свободного места на диске (+ место для ваших файлов)
- Для импорта из браузера: Chrome, Edge, Яндекс.Браузер или другой Chromium-based браузер

### Для разработчиков

```bash
# Клонировать репозиторий
git clone https://github.com/rocontd/Artist-Reference-Collection.git
cd Artist-Reference-Collection

# Установить зависимости
npm install
cd renderer && npm install && cd ..

# Запустить в режиме разработки
npm run dev

# Собрать установщик
npm run build
npm run build:prod
```

**Полезные документы:**
- [TESTING_GUIDE.md](TESTING_GUIDE.md) — руководство по тестированию
- [ANALYSIS_REPORT.md](ANALYSIS_REPORT.md) — анализ кодовой базы и архитектурные решения

---

## Технологии

- **Electron 28+** — основа настольного приложения
- **React 18+** — UI фреймворк
- **TypeScript 5.3+** — язык разработки
- **IndexedDB + Dexie.js** — база данных для метаданных
- **Node.js File System API** — работа с файловой системой
- **Vite** — сборщик для renderer процесса
- **Sharp** — обработка изображений
- **FFmpeg** — генерация превью для видео

---

## Структура проекта

```
arc/
├── src/                    # Исходный код TypeScript
│   ├── main/              # Main Process (управление окном, IPC)
│   └── preload/           # Preload Script (безопасный мост)
├── renderer/              # React приложение (Renderer Process)
│   └── src/
│       ├── components/    # React компоненты
│       ├── pages/         # Страницы приложения
│       ├── hooks/         # Кастомные хуки
│       ├── services/      # Сервисы (БД, файловая система)
│       └── types/         # TypeScript типы
├── docs/                  # Документация
├── browser-extension/     # Браузерное расширение для импорта
├── release/               # Готовые установщики
└── resources/             # Иконки и ресурсы для сборки
```

---

## Файловая система

ARC использует умную организацию файлов:

```
{рабочая_папка}/
├── 2024/                  # Группировка по годам
│   ├── 01/               # По месяцам
│   │   └── 15/          # По дням
│   │       ├── image1.jpg
│   │       └── video1.mp4
└── _cache/
    ├── thumbs/           # Превью изображений (512px, JPEG 85%)
    └── imports/          # Временные файлы из браузера (автоочистка через 7 дней)
```

---

## История изменений

### v1.2.9 (3 декабря 2025)
- **Критические исправления (блокировали запуск)**
  - Создан отсутствующий download-manager.ts — теперь приложение запускается корректно
  - Синхронизированы типы ElectronAPI с preload.ts реализацией
  - Исправлена кроссплатформенность — работает на Windows, macOS и Linux
- **Функционал "Что нового?"**
  - Модальное окно показывается автоматически после обновления приложения
  - Клик на badge версии открывает окно с изменениями
  - Красивый дизайн в стиле существующих диалогов
- **Улучшения UX**
  - Минималистичное системное меню (1 раздел вместо 4)
  - Горячие клавиши работают только когда окно в фокусе (убраны конфликты)
  - Стилизованные диалоги вместо системных alert/confirm
  - Импорт из браузера теперь работает мгновенно
- **Безопасность и стабильность**
  - Защита от path traversal атак
  - Валидация всех путей к файлам
  - Ротация логов (макс 10MB, хранится 5 файлов)
  - Реализованы handlers для автообновлений

### v1.2.8 (декабрь 2025)
- Drag-and-Drop для меток между категориями
- Опциональные метки при добавлении карточек
- Упрощен процесс импорта файлов

### v1.2.7 (январь 2025)
- **Улучшения интерфейса**
  - Объединены блоки "Шаблон" и "Описание" по горизонтали (50:50)
  - Убраны кнопки навигации в очереди добавления карточек (переключение через клик по превью)
  - Добавлена алфавитная сортировка меток в рамках категории (а→я, a→z)
  - Добавлена возможность изменения порядка категорий с помощью кнопок вверх/вниз на странице "Категории и метки"
  - Порядок категорий сохраняется и применяется на всех страницах (добавление карточки, редактирование)
  - Исправлены скругления углов у карточек в компактном отображении
  - Улучшена визуальная структура блоков категорий и меток

### v1.2.6 (январь 2025)
- **Новое: Поле описания для карточек**
  - Добавлено необязательное поле "Описание" для каждой карточки (до 2000 символов)
  - Textarea на экране добавления карточки с placeholder "Введите описание…"
  - Отображение описания в модалке просмотра карточки (только если заполнено)
  - Редактирование описания в режиме редактирования карточки
  - **Кликабельные ссылки** — ссылки в описании автоматически распознаются и открываются в браузере по умолчанию
  - Ссылки отображаются как короткий текст вместо полного URL (как в Notion)
  - Сохранение переносов строк и форматирования текста

### v1.2.5 (январь 2025)
- **Улучшена проверка целостности данных**
  - Вынесен отдельный блок "Проверка" в настройках (три блока в ряд)
  - Все сообщения об ошибках теперь показываются через стилизованные Dialog/Alert/Toast
  - Добавлена проверка меток с несуществующими категориями
  - Улучшены сообщения об ошибках с детальной информацией (ID карточки, пути к файлам, рекомендации)
  - Убрана кнопка "Очистить метки" из раздела статистика (функционал перенесен в проверку целостности)
- **Исправления и улучшения**
  - Исправлена структура вложенности блоков в настройках
  - Улучшена обработка ошибок при экспорте файлов
  - Добавлен поиск по ID карточки в глобальном поиске

### v1.2.1 (19 ноября 2024)
- **Новый функционал: Импорт из браузера**
  - Добавлено браузерное расширение для Chrome и Яндекс.Браузера
  - Кнопка "Сохранить в ARC" появляется при наведении на изображения
  - Умная очередь импорта с уведомлением при открытии приложения
  - Файлы перемещаются (не копируются) в рабочую папку
  - Временные файлы хранятся в `_cache/imports` внутри рабочей папки
  - Автоматическая очистка старых временных файлов (старше 24 часов)
- Реализован протокол `arc://` для deep linking
- Приложение не перехватывает фокус при каждом добавлении файла
- Оптимизирована работа с массовым импортом изображений

### v1.1.5 (15 ноября 2024)
- Исправлена критическая ошибка: система больше не позволяет создавать метки с одинаковыми названиями в разных категориях
- Добавлена валидация меток на дубликаты во всей системе с показом alert при попытке создать дубликат
- Модальное окно создания категории переделано как дубликат окна редактирования
- Кнопка удаления в модальных окнах категорий размещена слева
- Поиск по описанию меток теперь работает во всех местах (добавление карточки, редактирование карточки)

### v1.1.4 (15 ноября 2024)
- Добавлена поддержка описаний меток — мета-информация для меток, отображаемая в tooltip при наведении
- Реализовано редактирование меток — возможность исправлять опечатки и переименовывать метки без переприменения к карточкам
- Глобальный поиск теперь ищет по названию и описанию меток
- Улучшен интерфейс редактирования категорий — удобный репитер для управления метками с описаниями

### v1.1.3 (15 ноября 2024)
- Исправлена проблема с выделением текста. Теперь можно выделять, копировать и редактировать текст во всех полях ввода
- Single Instance Lock — приложение больше не запускается в нескольких экземплярах, повторный клик по ярлыку фокусирует существующее окно
- Jump List для Windows — быстрая навигация по разделам через контекстное меню на панели задач (правый клик по иконке)
- Модалка редактирования коллекций. Добавлен удобный интерфейс для переименования коллекций
- Исправлено дублирование списков при добавлении новых тегов в категорию

### v1.1.1 (13 ноября 2024)
- Улучшена типографика в разделе "История изменений"
- Исправлены отступы и размеры кнопок фильтров
- Добавлены иконки для визуального разделения секций
- Унифицирована структура информационных блоков

### v1.1.0 (ноябрь 2024)
- Добавлен раздел "История изменений"
- Улучшена статистика использования
- Обновлена система автообновлений
- Исправлены мелкие баги

### v1.0.0 (ноябрь 2024)
- Первый стабильный релиз
- Полный функционал для работы с карточками
- Система тегов и коллекций
- Полнотекстовый поиск
- Мудборды

Полная история: [CHANGELOG.md](CHANGELOG.md)

---

## Лицензия

Этот проект лицензирован под MIT License. См. файл [LICENSE](LICENSE) для деталей.

---

## Контакты

**Автор:** Александр Лавренюк  
**Telegram:** [@a_landy](https://t.me/a_landy)

---

**2025**
