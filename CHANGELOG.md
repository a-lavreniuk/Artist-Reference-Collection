# Changelog

Все заметные изменения в проекте ARC будут задокументированы в этом файле.

## [1.4.0] - 2026-01-01

### Добавлено

#### Расширенная поддержка медиаформатов
Приложение теперь поддерживает значительно больше форматов изображений и видео:

**Изображения (15 форматов):**
- Базовые форматы: JPEG/JPG, PNG, WebP, GIF, BMP
- TIFF форматы: TIFF, TIF
- Современные форматы: HEIC, HEIF, JPEG XL (JXL)
- RAW форматы: CR2 (Canon), NEF (Nikon), DNG (Adobe), ARW (Sony), ORF (Olympus), RW2 (Panasonic)
- Документы: PDF (с превью первой страницы)

**Видео (18 форматов):**
- HTML5 совместимые (воспроизведение в приложении): MP4, WebM, OGV, M4V
- Частично совместимые: MOV, AVI, MKV, MPEG, MPG, M2V, 3GP, TS, MTS
- Legacy форматы (только превью): FLV, WMV, VOB, RMVB, SWF

#### Улучшения обработки медиа
- Автоматическое определение типа файла по magic bytes (надежнее чем по расширению)
- Улучшенная генерация превью через Sharp с поддержкой RAW форматов
- Timeout (30 секунд) для генерации видео превью через FFmpeg
- Graceful fallback для неподдерживаемых или поврежденных файлов

#### Улучшения интерфейса
- Кнопка "Открыть в системном плеере" для видео форматов, которые не воспроизводятся в браузере
- Информативные сообщения о несовместимых форматах
- Улучшенная обработка ошибок с понятными пользователю сообщениями

### Изменено
- Обновлена версия Sharp до 0.33.5 с поддержкой libraw и libheif
- Расширен список поддерживаемых расширений в сканировании директорий
- Улучшена валидация форматов при импорте файлов
- Использование библиотеки mime-types для надежного определения MIME типов

### Технические детали
- Добавлена библиотека file-type для определения типов файлов
- Добавлена библиотека pdfjs-dist для работы с PDF (подготовка к рендерингу)
- Создана утилита file-detector.ts для определения типов медиа
- Создана утилита pdf-renderer.ts для работы с PDF
- Создана утилита placeholder-generator.ts для fallback изображений
- Обновлена конфигурация electron-builder для упаковки нативных модулей

### Известные ограничения
- RAW форматы требуют Sharp скомпилированный с libraw (включено в зависимости)
- PDF файлы отображаются с placeholder превью (полный рендеринг в следующих версиях)
- Некоторые legacy видео форматы (FLV, WMV, VOB) не воспроизводятся в приложении - используйте системный плеер
- Размер приложения увеличен на ~70-100MB из-за дополнительных кодеков

---

## [1.3.5] - Предыдущая версия

Базовая поддержка форматов: JPG, JPEG, PNG, WebP, MP4, WebM

