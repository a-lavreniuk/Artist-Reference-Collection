# Список проблем проверки целостности данных

## 1. Отсутствующий файл (missing_file)
**Тип:** `missing_file`  
**Уровень:** `error`  
**Описание:**
```
Файл не найден: "[имя_файла]"
ID карточки: [ID_карточки]
Путь: [полный_путь_к_файлу]

Что делать:
• Найти карточку по ID в поиске и удалить её
• Восстановить файл из резервной копии
• Игнорировать (карточка останется, но файл недоступен)
```

**Причина:** Файл был удален или перемещен вручную, но запись о карточке осталась в базе данных.

**Варианты исправления:**
1. **Удалить карточку** - если файл больше не нужен
2. **Восстановить файл** - если есть резервная копия
3. **Игнорировать** - оставить карточку, но файл будет недоступен для просмотра/экспорта

**Можно исправить автоматически:** Нет (требует решения пользователя)

---

## 2. Метка с неверным счетчиком (orphaned_tag)
**Тип:** `orphaned_tag`  
**Уровень:** `warning`  
**Описание:**
```
Метка "[название_метки]" не используется ни в одной карточке, но имеет cardCount > 0
```

**Причина:** Счетчик использования метки (`cardCount`) не синхронизирован с реальным количеством карточек, использующих эту метку.

**Варианты исправления:**
1. **Автоматически пересчитать счетчик** - система обновит `cardCount` на основе реального количества карточек

**Можно исправить автоматически:** Да

---

## 3. Коллекция с несуществующими карточками (orphaned_collection)
**Тип:** `orphaned_collection`  
**Уровень:** `warning`  
**Описание:**
```
Коллекция "[название_коллекции]" содержит [количество] несуществующих карточек
```

**Причина:** В коллекции есть ссылки на карточки, которые были удалены из базы данных, но ссылки на них остались в коллекции.

**Варианты исправления:**
1. **Автоматически удалить ссылки** - система удалит ссылки на несуществующие карточки из коллекции

**Можно исправить автоматически:** Да

---

## 4. Категория с несуществующими метками (orphaned_category)
**Тип:** `orphaned_category`  
**Уровень:** `warning`  
**Описание:**
```
Категория "[название_категории]" содержит [количество] несуществующих меток
```

**Причина:** В категории есть ссылки на метки, которые были удалены из базы данных, но ссылки на них остались в категории.

**Варианты исправления:**
1. **Автоматически удалить ссылки** - система удалит ссылки на несуществующие метки из категории

**Можно исправить автоматически:** Да

---

## 5. Мудборд с несуществующими карточками (moodboard_mismatch)
**Тип:** `moodboard_mismatch`  
**Уровень:** `warning`  
**Описание:**
```
Мудборд содержит [количество] несуществующих карточек
```

**Причина:** В мудборде есть ссылки на карточки, которые были удалены из базы данных, но ссылки на них остались в мудборде.

**Варианты исправления:**
1. **Автоматически удалить ссылки** - система удалит ссылки на несуществующие карточки из мудборда

**Можно исправить автоматически:** Да

---

## Итоговая таблица проблем

| Тип проблемы | Уровень | Автоисправление | Требует действий пользователя |
|-------------|---------|-----------------|-------------------------------|
| `missing_file` | error | ❌ Нет | ✅ Да - нужно решить: удалить/восстановить/игнорировать |
| `orphaned_tag` | warning | ✅ Да | ❌ Нет |
| `orphaned_collection` | warning | ✅ Да | ❌ Нет |
| `orphaned_category` | warning | ✅ Да | ❌ Нет |
| `moodboard_mismatch` | warning | ✅ Да | ❌ Нет |

---

## Рекомендации по формулировкам

### Для ошибок (errors):
- Указывать конкретные данные (имя файла, ID карточки, путь)
- Предлагать четкие варианты действий
- Объяснять последствия каждого варианта

### Для предупреждений (warnings):
- Указывать количество проблемных элементов
- Объяснять что будет исправлено при автоисправлении
- Не требовать действий от пользователя (можно исправить автоматически)

