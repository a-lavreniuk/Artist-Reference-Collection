# üßπ –û—Ç—á—ë—Ç –æ–± –æ—á–∏—Å—Ç–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç PWA

–î–∞—Ç–∞: 6 –Ω–æ—è–±—Ä—è 2025

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω –æ—Ç PWA

–£–¥–∞–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è PWA —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç **—Ç–æ–ª—å–∫–æ** –∫–æ–¥ –¥–ª—è Electron –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

---

## üóëÔ∏è –£–¥–∞–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏ Service Workers
- ‚úÖ `renderer/public/manifest.json` - PWA –º–∞–Ω–∏—Ñ–µ—Å—Ç
- ‚úÖ `renderer/public/sw.js` - Service Worker
- ‚úÖ `renderer/dist/manifest.json` - —Å–æ–±—Ä–∞–Ω–Ω—ã–π –º–∞–Ω–∏—Ñ–µ—Å—Ç
- ‚úÖ `renderer/dist/sw.js` - —Å–æ–±—Ä–∞–Ω–Ω—ã–π SW
- ‚úÖ `renderer/dist/manifest.webmanifest` - web –º–∞–Ω–∏—Ñ–µ—Å—Ç
- ‚úÖ `renderer/dist/registerSW.js` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä SW
- ‚úÖ `renderer/dist/workbox-b833909e.js` - Workbox

### –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –∏ assets
- ‚úÖ `renderer/public/vite.svg` - –∏–∫–æ–Ω–∫–∞ Vite
- ‚úÖ `renderer/dist/vite.svg` - –∏–∫–æ–Ω–∫–∞ Vite (dist)
- ‚úÖ `renderer/src/assets/react.svg` - –∏–∫–æ–Ω–∫–∞ React
- ‚úÖ `renderer/src/assets/` - –ø—É—Å—Ç–∞—è –ø–∞–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∞

### –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ `renderer/src/services/fileSystem.ts` - —Å—Ç–∞—Ä—ã–π File System Access API
- ‚úÖ `renderer/src/types/fileSystem.d.ts` - —Ç–∏–ø—ã –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–Ω–æ–≥–æ API

**–ò—Ç–æ–≥–æ —É–¥–∞–ª–µ–Ω–æ:** 12 —Ñ–∞–π–ª–æ–≤ + 1 –ø–∞–ø–∫–∞

---

## üìù –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ö–æ–¥
- ‚úÖ `renderer/src/hooks/usePWA.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (—Ç–µ–ø–µ—Ä—å –ø—Ä–æ Electron)
- ‚úÖ `renderer/src/hooks/useFileSystem.ts` - —É–∂–µ –±—ã–ª –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –¥–ª—è Electron
- ‚úÖ `renderer/src/components/gallery/AddCardFlow.tsx` - —É–¥–∞–ª—ë–Ω –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π import
- ‚úÖ `renderer/index.html` - —É–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ vite.svg, –æ–±–Ω–æ–≤–ª—ë–Ω title

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `renderer/vite.config.ts` - vite-plugin-pwa –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- ‚úÖ `renderer/package.json` - vite-plugin-pwa –Ω–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö

---

## üéØ –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –≤ –ø—Ä–æ–µ–∫—Ç–µ

### –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (—Ç–æ–ª—å–∫–æ Electron)

**Main Process (4 —Ñ–∞–π–ª–∞):**
- `src/main/main.ts` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–∫–Ω–æ–º
- `src/main/ipc-handlers.ts` - —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ —á–µ—Ä–µ–∑ Node.js
- `src/main/auto-updater.ts` - electron-updater
- `src/main/shortcuts.ts` - –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏

**Preload (1 —Ñ–∞–π–ª):**
- `src/preload/preload.ts` - IPC –º–æ—Å—Ç

**Renderer (62 —Ñ–∞–π–ª–∞):**
- `src/components/` - 20+ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- `src/pages/` - 7 —Å—Ç—Ä–∞–Ω–∏—Ü
- `src/services/db.ts` - IndexedDB —á–µ—Ä–µ–∑ Dexie
- `src/hooks/` - useFileSystem, usePWA (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã)
- `src/types/` - TypeScript —Ç–∏–ø—ã (–≤–∫–ª—é—á–∞—è electron.d.ts)
- `src/styles/` - CSS —Å—Ç–∏–ª–∏
- `App.tsx`, `main.tsx`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (8 —Ñ–∞–π–ª–æ–≤):**
- `package.json` (root + renderer)
- `tsconfig.*.json` (3 —Ñ–∞–π–ª–∞)
- `vite.config.ts`
- `electron-builder.yml`

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (14 —Ñ–∞–π–ª–æ–≤):**
- 13 MD/TXT —Ñ–∞–π–ª–æ–≤ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- `resources/README.md`

**–í—Å–µ–≥–æ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** ~90 (–±–µ–∑ node_modules)

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—á–∏—Å—Ç–∫–∏

### –î–æ –æ—á–∏—Å—Ç–∫–∏
```
–§–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ: 117
- PWA —Ñ–∞–π–ª—ã: 12
- –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ: 1
- –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ: 104
```

### –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏
```
–§–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ: 104
- PWA —Ñ–∞–π–ª–æ–≤: 0 ‚úÖ
- –ù–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö: 0 ‚úÖ
- –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ: 104 ‚úÖ
```

**–£–º–µ–Ω—å—à–µ–Ω–∏–µ:** -13 —Ñ–∞–π–ª–æ–≤ (-11%)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è PWA

### –í –∫–æ–¥–µ
- ‚úÖ File System Access API - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ Service Worker - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ manifest.json - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ vite-plugin-pwa - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- ‚úÖ showDirectoryPicker - –Ω–µ –Ω–∞–π–¥–µ–Ω–æ

### –í –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ usePWA.ts
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ useFileSystem.ts
- ‚ÑπÔ∏è –ù–∞–∑–≤–∞–Ω–∏–µ "usePWA" —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- ‚ÑπÔ∏è PWA —É–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)
- ‚ÑπÔ∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ —Å PWA –Ω–∞ Electron

---

## üéØ –ß—Ç–æ –ù–ï –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ (–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ)

### –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
1. **`usePWA` hook** - –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ, –Ω–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Electron
   - –ü—Ä–∏—á–∏–Ω–∞: –ù–µ –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ "Electron updates"

2. **`UpdateNotification` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –≤ Electron
   - –ü—Ä–∏—á–∏–Ω–∞: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
   - –ê–∫—Ç—É–∞–ª–µ–Ω –¥–ª—è electron-updater

### –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏—è
1. **–£–ø–æ–º–∏–Ω–∞–Ω–∏—è PWA –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏** (MIGRATION_SUMMARY.md –∏ –¥—Ä.)
   - –ü—Ä–∏—á–∏–Ω–∞: –≠—Ç–æ –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ—Ç–∫—É–¥–∞ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –∏ –ø–æ—á–µ–º—É

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è
```
‚úÖ TypeScript (main):     OK - 0 errors
‚úÖ TypeScript (preload):  OK - 0 errors
‚úÖ TypeScript (renderer): OK - 0 errors
‚úÖ Vite build:           OK - 1.10s
```

### –†–∞–∑–º–µ—Ä —Å–±–æ—Ä–∫–∏
```
index.html:              0.68 kB
CSS:                    52.71 kB
JavaScript (total):    401.12 kB
  - ui-vendor:           4.29 kB
  - react-vendor:       43.33 kB
  - db-vendor:          95.67 kB
  - index:             257.83 kB
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ dist/
```
dist/
‚îú‚îÄ‚îÄ index.html          ‚úÖ –ë–µ–∑ —Å—Å—ã–ª–æ–∫ –Ω–∞ vite.svg
‚îú‚îÄ‚îÄ assets/             ‚úÖ 5 –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ fonts/              ‚úÖ README (—à—Ä–∏—Ñ—Ç—ã –¥–æ–±–∞–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
```

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –æ—á–∏—Å—Ç–∫–∏

### –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ ‚úÖ
- [x] manifest.json (–≤—Å–µ –∫–æ–ø–∏–∏)
- [x] sw.js (service worker)
- [x] registerSW.js
- [x] *.webmanifest
- [x] workbox-*.js
- [x] vite.svg
- [x] react.svg
- [x] fileSystem.ts (—Å—Ç–∞—Ä—ã–π API)
- [x] fileSystem.d.ts (—Ç–∏–ø—ã)
- [x] assets/ (–ø—É—Å—Ç–∞—è –ø–∞–ø–∫–∞)

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞ ‚úÖ
- [x] usePWA.ts - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–æ Electron
- [x] useFileSystem.ts - –ø—Ä–æ Electron API
- [x] AddCardFlow.tsx - —É–¥–∞–ª—ë–Ω –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π import
- [x] index.html - —É–¥–∞–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ vite.svg
- [x] index.html - –æ–±–Ω–æ–≤–ª—ë–Ω title

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚úÖ
- [x] vite-plugin-pwa - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ package.json
- [x] –í—Å–µ Electron –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –º–µ—Å—Ç–µ
- [x] –í—Å–µ React –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞ –º–µ—Å—Ç–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ
- [x] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] Vite —Å–æ–±–∏—Ä–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –†–∞–∑–º–µ—Ä —Å–±–æ—Ä–∫–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π
- [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ dist/ —á–∏—Å—Ç–∞—è

---

## üéâ –ò—Ç–æ–≥

**–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω –æ—Ç PWA!**

–¢–µ–ø–µ—Ä—å —ç—Ç–æ **—á–∏—Å—Ç–æ–µ Electron –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ —Å–ª–µ–¥–æ–≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π PWA –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

### –û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:
- Node.js –∫–æ–¥ (main process)
- React –∫–æ–¥ (renderer)
- Electron —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –ì–æ—Ç–æ–≤–æ –∫:
- ‚úÖ –î–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- ‚úÖ –°–±–æ—Ä–∫–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫–∞
- ‚úÖ –ü—É–±–ª–∏–∫–∞—Ü–∏–∏

---

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ

*–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: `start-dev.bat`*

